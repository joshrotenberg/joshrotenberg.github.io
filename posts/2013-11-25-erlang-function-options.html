<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>jrdc- Erlang function options</title>
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link rel="stylesheet" type="text/css" href="../css/syntax.css" />
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../">josh rotenberg dot com</a>
            </div>
            <div id="navigation">
                <a href="../">home</a>
                <a href="../about.html">about</a>
                <a href="../contact.html">contact</a>
                <a href="../archive.html">archive</a>
            </div>
        </div>

        <div id="content">
		 <h1>Erlang function options</h1> 

            <div class="info">
    Posted on November 25, 2013
    
</div>

<p>In working on a small Erlang project I found myself writing a few functions that take one or more required parameters and then possibly a few optional ones. A common idiom in Erlang is take a list of tuples and/or atoms for optional parameters. For example, <code>gen_tcp:connect</code> has a signature like this: <code>gen_tcp:connect(Host, Port, Options)</code>, where Options can be all kinds of stuff, such as:</p>
<pre class="sourceCode erlang"><code class="sourceCode erlang"><span class="fu">{</span><span class="ch">ok</span><span class="fu">,</span> <span class="dt">Socket</span><span class="fu">}</span> <span class="kw">=</span> <span class="fu">gen_tcp:connect(</span><span class="st">&quot;localhost&quot;</span><span class="fu">,</span> <span class="dv">12345</span><span class="fu">,</span> <span class="fu">[</span><span class="ch">binary</span><span class="fu">,</span> <span class="fu">{</span><span class="ch">packet</span><span class="fu">,</span> <span class="dv">0</span><span class="fu">},</span> <span class="fu">{</span><span class="ch">active</span><span class="fu">,</span> <span class="ch">false</span><span class="fu">}]).</span></code></pre>
<p>In this case, the host and port are required, and the third is a list of various kinds of meta data, in various forms. <code>binary</code> is a single atom; <code>packet</code> takes an integer, and according to the <a href="http://erldocs.com/R16B02/kernel/inet.html#setopts/2">docs</a> (which are actually part of inet:setopts) the value can be either 0 or <code>raw</code>, or <code>1</code>, <code>2</code> or <code>4</code>. The value of <code>active</code> can be <code>true</code>, <code>false</code> or <code>once</code>.</p>
<p>Iâ€™m using a function to build up a record that will then be passed on to another function for further processing. The user should only have to pass in one required parameter, and then a list of zero or more optional ones, so I want the call would look something like this:</p>
<pre class="sourceCode erlang"><code class="sourceCode erlang"><span class="fu">{</span><span class="ch">ok</span><span class="fu">,</span> <span class="dt">Result</span><span class="fu">}</span> <span class="kw">=</span> <span class="fu">my_func(</span><span class="dt">Arg2</span><span class="fu">,</span> <span class="dt">Arg2</span><span class="fu">,</span> <span class="dt">Options</span><span class="fu">).</span></code></pre>
<p>where <code>Options</code> looks like <code>[foo, {bar, 20}, {baz, &quot;hello&quot;}]</code>.</p>
<p>In this case no options are required, so I also added in a 1 parameter version of the function:</p>
<script src="https://gist.github.com/joshrotenberg/7666492.js?file=function_options.erl"> </script>

<p>Pattern matching and recursion make handling this kind of thing pretty clean. If I need to add an option or change how one is handled, its clear where to do it and its easy to test those changes.</p>

        </div>
        <div id="footer">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
